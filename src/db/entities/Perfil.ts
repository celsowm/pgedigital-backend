// AUTO-GENERATED by scripts/generate-entities.mjs
// Regenerate after schema changes.
import { col, Entity, Column, PrimaryKey, HasMany, BelongsTo, BelongsToMany, HasManyCollection, BelongsToReference, ManyToManyCollection } from 'metal-orm';
import { AcessoRestritoFuncionalidade } from './AcessoRestritoFuncionalidade.js';
import { AcessoRestritoFuncionalidadePerfil } from './AcessoRestritoFuncionalidadePerfil.js';
import { Usuario } from './Usuario.js';
import { UsuarioPerfil } from './UsuarioPerfil.js';

@Entity({ tableName: 'perfil' })
export class Perfil {
  /**
   * Identificador do perfil
   * @remarks Auto-increment identity column
   */
  @PrimaryKey(col.notNull(col.autoIncrement(col.int())))
  id!: number;

  /**
   * Identificador parent
   * @remarks References dbo.perfil.id (on delete NO ACTION, on update NO ACTION)
   */
  @Column(col.references(col.int(), { table: 'perfil', column: 'id', onDelete: 'NO ACTION', onUpdate: 'NO ACTION' }))
  parent_id?: number;

  /**
   * Nome do perfil
   */
  @Column(col.notNull(col.text()))
  nome!: string;

  /**
   * Valor a esquerda.
   */
  @Column(col.int())
  lft?: number;

  /**
   * Valor a direita.
   */
  @Column(col.int())
  rght?: number;

  @BelongsToMany({ target: () => Usuario, pivotTable: () => UsuarioPerfil, pivotForeignKeyToRoot: 'perfil_id', pivotForeignKeyToTarget: 'usuario_id' })
  usuarios!: ManyToManyCollection<Usuario>;

  @BelongsToMany({ target: () => AcessoRestritoFuncionalidade, pivotTable: () => AcessoRestritoFuncionalidadePerfil, pivotForeignKeyToRoot: 'perfil_id', pivotForeignKeyToTarget: 'acesso_restrito_funcionalidade_id' })
  acessosRestritoFuncionalidade!: ManyToManyCollection<AcessoRestritoFuncionalidade>;

  @BelongsTo({ target: () => Perfil, foreignKey: 'parent_id' })
  parent!: BelongsToReference<Perfil>;

  @HasMany({ target: () => Perfil, foreignKey: 'parent_id' })
  perfis!: HasManyCollection<Perfil>;

  @HasMany({ target: () => UsuarioPerfil, foreignKey: 'perfil_id' })
  usuariosPerfil!: HasManyCollection<UsuarioPerfil>;

  @HasMany({ target: () => AcessoRestritoFuncionalidadePerfil, foreignKey: 'perfil_id' })
  acessosRestritoFuncionalidadePerfil!: HasManyCollection<AcessoRestritoFuncionalidadePerfil>;

}
